@model Pelo.v2.Web.Models.Ward.UpdateWardModel
@{
    ViewBag.Title = "Thêm mới xã phường";
    Layout = "_Layout";
}
@section cssPlugin{
    <link rel="stylesheet" href="@Url.Content("~/lib/spectrum/spectrum.css")">
}
@section jsPlugin {
    <script src="@Url.Content("~/lib/spectrum/spectrum.js")"></script>
}
<ol class="breadcrumb">
    <li><a href="@Url.Action("Index","Ward")">Danh sách xã phường</a></li>
    <li class="active">Thêm mới xã phường</li>
</ol>

<section class="card">
    <div class="card-block">
        <form asp-controller="Ward" asp-action="Add" method="post" id="ward-form">
            @Html.ValidationSummary()
            <div class="row">
                <div class="col-lg-12">
                    <fieldset class="form-group">
                        <label class="form-label semibold" for="Name">Tên</label>
                        <input asp-for="Name" class="form-control" type="text" placeholder="Tên" />
                        @Html.ValidationMessageFor(c => c.Name)
                    </fieldset>
                </div>
                <div class="col-lg-12">
                    <fieldset class="form-group">
                        <nop-label asp-for="ProvinceId" text-display="Tỉnh thành" />
                        <nop-select asp-for="ProvinceId" asp-items="Model.AvaiableProvinces" />
                    </fieldset>
                </div>
                <div class="col-lg-12">
                    <fieldset class="form-group">
                        <nop-label asp-for="DistrictId" text-display="Quận huyện" />
                        <nop-select asp-for="DistrictId" asp-items="Model.AvaiableDistricts" />
                        @Html.ValidationMessageFor(c => c.DistrictId)
                    </fieldset>
                </div>
                <div class="col-lg-12">
                    <fieldset class="form-group">
                        <label class="form-label semibold" for="SortOrder">Vị trí</label>
                        <input asp-for="SortOrder" class="form-control" type="text" placeholder="Vị trí" />
                        @Html.ValidationMessageFor(c => c.SortOrder)
                    </fieldset>
                </div>
                <div class="col-lg-12">
                    <fieldset class="form-group">
                        <label class="form-label semibold" for="Type">Loại</label>
                        <input asp-for="Type" class="form-control" type="text" placeholder="Loại" />
                        @Html.ValidationMessageFor(c => c.Type)
                    </fieldset>
                </div>
                <div class="col-lg-12">
                    <fieldset class="form-group">
                        <button type="submit" class="btn btn-primary">Thêm mới</button>
                        <a class="btn btn-default" href="@Url.Action("Index", "Ward")">Hủy</a>
                    </fieldset>
                </div>
            </div>
        </form>
    </div>
</section>

@section js{
    <script>
        $(document).ready(function () {
            $('.opened').removeClass('opened');
            $('.row-active').removeClass('row-active');
            $('#liAppConfig').addClass('opened');
            $('#liWard').addClass('row-active');
            $("#@Html.IdFor(model => model.ProvinceId)").change(function() {
                var selectedItem=$(this).val();
                var dllDistricts=$("#@Html.IdFor(model => model.DistrictId)");
                $.ajax({
                        cache:true,
                        type:"POST",
                        url:"@Url.Action("GetDistrictByProvinceId", "District")",
                        data:{
                                "provinceId":selectedItem,
                                "addAll":"true"
                            },
                        success:function(data,textStatus,jqXHR) {
                            dllDistricts.html('');
                            $.each(data,
                                function(id,option) {
                                    dllDistricts.append($('<option></option>').val(option.Id)
                                        .html(option.Type+' '+option.Name));
                                });
                            loadWards(99999999);
                        },
                        error:function(jqXHR,textStatus,errorThrown) {
                            $("#statesAlert").click();
                            console.log("jqXHR: "+jqXHR);
                            console.log("textStatus: "+textStatus);
                            console.log("errorThrown: "+errorThrown);
                        }
                    });
            });
        })
    </script>
}
